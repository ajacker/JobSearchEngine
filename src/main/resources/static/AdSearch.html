<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <title>高级搜索</title>
    <style>
        .row {
            margin-top: 10px;
        }
    </style>
    <link href="css/bootstrap-datetimepicker.min.css"
          rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.9/dist/css/bootstrap-select.min.css"
          rel="stylesheet">
    <!-- Bootstrap -->

    <link href="webjars/bootstrap/3.4.1/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://unpkg.com/bootstrap-table@1.15.3/dist/bootstrap-table.min.css" rel="stylesheet">


</head>

<body class="container">
<div class="row">
    <!--导航条-->
    <nav class="navbar navbar-default col-1" role="navigation">
        <div class="container-fluid">
            <div class="navbar-header">
                <a class="navbar-brand" href="#">高级条件查询</a>
            </div>
        </div>
    </nav>
</div>
<div class="row panel panel-default">

    <div class="panel-heading" style="text-align: center">查询条件</div>
    <div class="panel-body" style="padding-left: 60px">


        <div class="row">
            <form class="form-inline">
                <div class="form-group col-md-6">
                    <label for="input-jobname">职位名</label>
                    <input class="form-control" id="input-jobname" placeholder="职位名"
                           style="width: 200px;margin-right: 10px"
                           type="text">
                    <select class="selectpicker" data-width="auto" id="select-jobname">
                        <option value="1">模糊搜索</option>
                        <option value="2">精确搜索</option>
                    </select>
                </div>
                <div class="form-group col-md-6">
                    <label for="input-companyname">公司名</label>
                    <input class="form-control" id="input-companyname" placeholder="公司名" type="text">
                    <select class="selectpicker" data-width="auto" id="select-companyname">
                        <option value="1">模糊搜索</option>
                        <option value="2">精确搜索</option>
                    </select>
                </div>
            </form>
        </div>

        <div class="row">
            <form class="form-inline col-md-6">
                <div class="form-group">
                    <label for="selectorProvence">地&nbsp;&nbsp;&nbsp;&nbsp;址</label>
                    <select class="selectpicker" data-live-search="true" data-width="200px" id="selectorProvence"
                            multiple>
                        <option value="山东">山东</option>
                        <option value="江苏">江苏</option>
                        <option value="上海">上海</option>
                        <option value="浙江">浙江</option>
                        <option value="安徽">安徽</option>
                        <option value="福建">福建</option>
                        <option value="江西">江西</option>
                        <option value="广东">广东</option>
                        <option value="广西">广西</option>
                        <option value="海南">海南</option>
                        <option value="河南">河南</option>
                        <option value="湖南">湖南</option>
                        <option value="湖北">湖北</option>
                        <option value="北京">北京</option>
                        <option value="天津">天津</option>
                        <option value="河北">河北</option>
                        <option value="山西">山西</option>
                        <option value="内蒙古">内蒙古</option>
                        <option value="宁夏">宁夏</option>
                        <option value="青海">青海</option>
                        <option value="陕西">陕西</option>
                        <option value="甘肃">甘肃</option>
                        <option value="新疆">新疆</option>
                        <option value="四川">四川</option>
                        <option value="贵州">贵州</option>
                        <option value="云南">云南</option>
                        <option value="重庆">重庆</option>
                        <option value="西藏">西藏</option>
                        <option value="辽宁">辽宁</option>
                        <option value="吉林">吉林</option>
                        <option value="黑龙江">黑龙江</option>
                        <option value="香港">香港</option>
                        <option value="澳门">澳门</option>
                        <option value="台湾">台湾</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="input-extra"></label>
                    <input class="form-control" id="input-extra" placeholder="额外条件(例如市/县)"
                           style="width: 200px;margin-left: 4px"
                           type="text">
                </div>
            </form>
            <form class="form-inline col-md-6">
                <div class="form-group">
                    <label for="type-select">学 &nbsp;&nbsp;&nbsp;历</label>
                    <select class="selectpicker" data-width="auto" id="type-select">
                        <option value="1">≤</option>
                        <option value="2">=</option>
                    </select>
                    <label for="edu-select"></label>
                    <select class="selectpicker" data-width="auto" id="edu-select">
                        <option value="1">初中及以下</option>
                        <option value="2">高中/中技/中专</option>
                        <option value="3">大专</option>
                        <option value="4">本科</option>
                        <option value="5">硕士</option>
                        <option value="6">博士</option>
                    </select>
                </div>
            </form>
        </div>
        <div class="row">
            <form class="form-inline col-md-6">
                <div class="form-group">
                    <label for="minSalary">薪&nbsp;&nbsp;&nbsp;&nbsp;资</label>
                    <div class='input-group date col-sm-5 ' id='minSalary'>
                        <input class="form-control" id="input-minSalary"
                               onkeyup="value=value.replace(/^(0+)|[^\d]+/g,'')" type='text'/>
                        <span class="input-group-addon " style="margin-left:-20px ;">
                                <span>K</span>
                    </span>
                    </div>
                </div>
                <label class="" style="margin-left:-110px ;">————</label>
                <div class="form-group" style="margin-left: 0;">

                    <label for="maxSalary" style="margin-left: 0;"></label>
                    <div class='input-group date col-sm-6' id='maxSalary'>
                        <input class="form-control" id="input-maxSalary"
                               onkeyup="value=value.replace(/^(0+)|[^\d]+/g,'')" type='text'/>
                        <span class="input-group-addon">
                        <span class="">K</span>
                    </span>
                    </div>
                </div>
            </form>
            <form class="form-inline col-md-6">
                <div class="form-group" style="margin-left: 0">
                    <label for="datetimepicker1">日&nbsp;&nbsp;&nbsp;&nbsp;期</label>
                    <div class='input-group date col-sm-7' id='datetimepicker1'>
                        <input class="form-control" id="dateFrom" style="width: 160px" type='text'/>
                        <span class="input-group-addon">
                            <span class="glyphicon glyphicon-calendar margin-left:0px; margin-right: 0px;"></span>
                    </span>
                    </div>
                </div>
                <label style="margin-left:-60px ;"> ————</label>
                <div class="form-group" style="margin-left: 0;">
                    <label for="datetimepicker2"></label>
                    <div class='input-group date col-sm-9' id='datetimepicker2'>
                        <input class="form-control" id="dateTo" style="width: 160px" type='text'/>
                        <span class="input-group-addon">
                            <span class="glyphicon glyphicon-calendar"></span>
                    </span>
                    </div>
                </div>
            </form>
        </div>
        <div class="row text-center" style="margin-left:-60px ;">

            <button class="btn btn-primary" onclick="search()" style="width: 120px" type="button">精确搜索</button>

        </div>
    </div>
</div>

<!--显示结果的面板-->
<div class="row panel panel-default">
    <!-- Default panel contents -->
    <div class="panel-heading" style="text-align: center">查询结果</div>
    <table id="table"></table>
    </div>


    <script src="webjars/jquery/3.4.1/jquery.min.js"></script>
    <script src="webjars/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <!-- Latest compiled and minified JavaScript -->
    <script src="js/bootstrap-select.js"></script>
    <!-- (Optional) Latest compiled and minified JavaScript translation files -->
    <script src="js/i18n/defaults-zh_CN.js"></script>
<script src="js/bootstrap-datetimepicker.js"></script>
<script src="js/i18n/bootstrap-datetimepicker.zh-CN.js"></script>
    <script src="js/bootstrap-table.min.js"></script>
    <!-- Latest compiled and minified Locales -->
    <script src="js/i18n/bootstrap-table-zh-CN.min.js"></script>
<script>
    function search() {
        $("#table").bootstrapTable('refresh', {pageNumber: 1});
    }
</script>
<script>
    $(document).ready(function () {
        $('#table').bootstrapTable({
            url: '/adsearch',
            method: 'post',
            queryParamsType: '',
            queryParams: getParams,
            pagination: true,
            pageNumber: 1,
            pageSize: 30,
            pageList: [15, 30, 50, 100],
            sidePagination: 'server',
            paginationPreText: '上一页',
            paginationNextText: '下一页',
            sortable: true,
            columns: [
                {
                    title: "职位名",
                    field: 'jobName',
                    formatter: function (value, row, index) {
                        var actions = [];
                        actions.push('<a href=' + row.url + '>' + value + '</a> ');
                        return actions.join('');
                    }
                },
                {title: "公司名", field: 'companyName'},
                {title: "工作地点", field: 'jobAddr'},
                {title: "薪资", field: 'salary', sortable: true},
                {title: "发布时间", field: 'time', sortable: true},
                {title: "链接", field: 'url', visible: false}
            ]


        })
    });

    function getParams(params) {
        var jobNameKeyWord = $('#input-jobname').val();
        var jobNameType = $('#select-jobname').val();
        var companyNameKeyWord = $('#input-companyname').val();
        var companyNameType = $('#select-companyname').val();
        var addressProvence = $('#selectorProvence').val();
        var addressExtra = $('#input-extra').val();
        var eduType = $('#type-select').val();
        var eduLevel = $('#edu-select').val();
        var minSalary = $('#input-minSalary').val();
        var maxSalary = $('#input-maxSalary').val();
        var dateFrom = $('#dateFrom').val();
        var dateTo = $('#dateTo').val();
        return {
            pageNumber: params.pageNumber,
            pageSize: params.pageSize,
            sortName: params.sortName,
            sortOrder: params.sortOrder,
            jobNameKeyWord: jobNameKeyWord,
            jobNameType: jobNameType,
            companyNameKeyWord: companyNameKeyWord,
            companyNameType: companyNameType,
            addressProvence: addressProvence,
            addressExtra: addressExtra,
            eduType: eduType,
            eduLevel: eduLevel,
            minSalary: minSalary,
            maxSalary: maxSalary,
            dateFrom: dateFrom,
            dateTo: dateTo
        };
    }
</script>
    <script>
        $('#dateFrom').datetimepicker({
            language: "zh-CN",
            format: 'yyyy-mm-dd',
            todayBtn: true,
            endDate: new Date(),
            startDate: new Date(new Date() - 1000 * 60 * 60 * 24 * 365),  //只显示一年的日期365天
            autoclose: true,   //选择日期后自动关闭日期选择框
            todayHighlight: true,   //当天高亮显示
            minView: "month"   //不显示时分秒
        }).on('changeDate', function (ev) {
            if (ev.date) {
                $(dateTo).datetimepicker('setStartDate', new Date(ev.date.valueOf()))
            } else {
                $(dateTo).datetimepicker('setStartDate', null);
            }
        });

        $('#dateTo').datetimepicker({
            language: "zh-CN",
            format: 'yyyy-mm-dd',
            todayBtn: true,
            endDate: new Date(),
            startDate: new Date(new Date() - 1000 * 60 * 60 * 24 * 365),  //只显示一年的日期365天
            autoclose: true,   //选择日期后自动关闭日期选择框
            todayHighlight: true,   //当天高亮显示
            minView: "month"   //不显示时分秒
        }).on('changeDate', function (ev) {
            if (ev.date) {
                $(dateFrom).datetimepicker('setEndDate', new Date(ev.date.valueOf()))
            } else {
                $(dateFrom).datetimepicker('setEndDate', new Date());
            }

        });
    </script>


</body>

</html>