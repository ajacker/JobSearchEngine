<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <!-- Bootstrap -->
    <link href="webjars/bootstrap/3.4.1/css/bootstrap.min.css" rel="stylesheet">
    <!-- Latest compiled and minified CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.9/dist/css/bootstrap-select.min.css"
          rel="stylesheet">
    <!-- Latest compiled and minified CSS -->
    <link href="https://unpkg.com/bootstrap-table@1.15.3/dist/bootstrap-table.min.css" rel="stylesheet">
</head>
<body>
<div class="page-header container">
    <h1 class="row">爬虫管理系统 <small>信息监控+状态管理</small></h1>
    <table class="table table-condensed">
        <thead>
        <tr>
            <th>队列剩余数量</th>
            <th>下载成功数量</th>
            <th>下载失败数量</th>
            <th>下载成功率</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td>xxxx</td>
            <td>xxxx</td>
            <td>xxxx</td>
            <td>xxxx</td>
        </tr>
        </tbody>
    </table>
    <div class="row" style="display: flex">
        <div aria-label="..." class="btn-group btn-group-lg center-block" role="group">
            <button class="btn btn-primary" id="start-btn" onclick="start()" type="button">启动</button>
            <button class="btn btn-danger" id="stop-btn" onclick="stop()" type="button">停止</button>
        </div>
    </div>

    <div class="panel panel-primary row" style="margin-top: 20px">
        <div class="panel-heading">
            <h3 class="panel-title">信息：</h3>
        </div>
        <div class="panel-body">
            <div id="message"></div>
        </div>
    </div>
</div>

</body>
<!-- jQuery (Bootstrap 的所有 JavaScript 插件都依赖 jQuery，所以必须放在前边) -->
<script src="webjars/jquery/3.4.1/jquery.min.js"></script>
<!-- 加载 Bootstrap 的所有 JavaScript 插件。你也可以根据需要只加载单个插件。 -->
<script src="webjars/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<!-- Latest compiled and minified JavaScript -->
<script src="js/bootstrap-select.js"></script>

<!-- (Optional) Latest compiled and minified JavaScript translation files -->
<script src="js/i18n/defaults-zh_CN.js"></script>


<!-- Latest compiled and minified JavaScript -->
<script src="js/bootstrap-table.min.js"></script>
<!-- Latest compiled and minified Locales -->
<script src="js/i18n/bootstrap-table-zh-CN.min.js"></script>
<script>
    function start() {
        $.ajax({
            type: "POST",
            url: "/spider/start",
            success: onReturn
        });
    }

    function stop() {
        $.ajax({
            type: "POST",
            url: "/spider/stop",
            success: onReturn
        });
    }

    function onReturn(data) {
        var status = data.status;
        var message = data.message;
        var type;
        switch (status) {
            case "-1":
                type = "alert alert-danger alert-dismissible";
                break;
            case "0":
                type = "alert alert-warning alert-dismissible";
                break;
            case "1":
                type = "alert alert-success alert-dismissible";
                break;
        }
        $("#message").prepend('<div class="' + type + '" role="alert">' +
            '<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>'
            + message + '</div>')
    }
</script>
</html>